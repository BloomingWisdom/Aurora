<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>AdminLTE 3 | 인사발령</title>

<!-- Google Font: Source Sans Pro -->
<link rel="stylesheet"
	href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,400i,700&display=fallback">
<!-- Font Awesome -->
<link rel="stylesheet"
	href="../../plugins/fontawesome-free/css/all.min.css">
<!-- DataTables -->
<link rel="stylesheet"
	href="../../plugins/datatables-bs4/css/dataTables.bootstrap4.min.css">
<link rel="stylesheet"
	href="../../plugins/datatables-responsive/css/responsive.bootstrap4.min.css">
<link rel="stylesheet"
	href="../../plugins/datatables-buttons/css/buttons.bootstrap4.min.css">
<!-- Select2 -->
<link
	href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css"
	rel="stylesheet" />

<!-- Theme style -->
<link rel="stylesheet" href="../../dist/css/adminlte.min.css">
<!-- daterange picker -->
<link rel="stylesheet"
	href="../../plugins/daterangepicker/daterangepicker.css">
</head>
<body class="hold-transition sidebar-mini">
	<div class="wrapper">

		<!-- 상단 메뉴 -->
		<nav th:replace="~{includes/navbar :: navbar}"></nav>
		<!-- /.상단 메뉴 -->

		<!-- 좌측 메뉴 -->
		<aside th:replace="~{includes/sidebar :: sidebar}"></aside>
		<!-- /.좌측 메뉴 -->

		<!-- Content Wrapper. Contains page content -->
		<div class="content-wrapper">
			<!-- 콘텐츠 헤더 (Page header) -->
			<section class="content-header">
				<div class="container-fluid">
					<div class="row mb-2">
						<div class="col-sm-6">
							<h1>인사발령</h1>
						</div>
						<div class="col-sm-6">
							<ol class="breadcrumb float-sm-right">
								<li class="breadcrumb-item"><a href="#">Home</a></li>
								<li class="breadcrumb-item active">인사발령</li>
							</ol>
						</div>
					</div>
				</div>
			</section>
			<!-- /.콘텐츠 헤더 (Page header) -->
			<!-- 메인 콘텐츠 -->
			<section class="content">
				<div
					class="d-flex justify-content-between bg-secondary rounded p-3 mb-4 m-2">
					<div class="d-flex">
						<div class="d-flex">
							<label class="col-form-label mr-3">발령구분</label> <select
								class="appointGubun" name="appointGubun"
								style="min-width: 120px">
								<option selected="selected" disabled>발령구분</option>
								<option>승진</option>
								<option>부서이동</option>
								<option>퇴사</option>
							</select>
						</div>

						<div class="d-flex ml-4">
							<!-- Date range -->
							<label for="" class="col-form-label mr-3"
								style="min-width: 70px;">발령일자</label>

							<div class="input-group">
								<div class="input-group-prepend">
									<span class="input-group-text"> <i
										class="far fa-calendar-alt"></i>
									</span>
								</div>
								<input type="text" class="form-control float-right"
									id="dateRange">
							</div>
							<!-- /.input group -->
							<!-- <div>
								<div class="input-group">
									<div class="input-group-prepend">
										<span class="input-group-text"> <i
											class="far fa-calendar-alt"></i>
										</span>
									</div>
									<input type="text" class="form-control float-right" id="stDate">
								</div>
							</div> -->
						</div>
					</div>
					<button type="button" class="btn btn-primary" id="btnSearch">조회</button>
				</div>
				<div class="container-fluid">
					<div class="row">
						<div class="col-12">
							<div class="card">
								<div class="card-body">
									<table id="example1" class="table table-bordered table-striped">
										<thead>
											<tr>
												<th>입사일자</th>
												<th>사원번호</th>
												<th>성명</th>
												<th>전화번호</th>
												<th>부서명</th>
												<th>직급</th>
												<th>E-Mail</th>
											</tr>
										</thead>
										<tbody>
											<!-- dataTable Ajax -->
										</tbody>
									</table>
								</div>
								<!-- /.card-body -->
							</div>
							<!-- /.card -->
						</div>
						<!-- /.col -->
					</div>
					<!-- /.row -->
				</div>
				<!-- /.container-fluid -->
			</section>
			<!-- /.content -->
		</div>
		<!-- /.content-wrapper -->
		<!-- 좌측 메뉴 -->
		<footer th:replace="~{includes/footer :: footer}"></footer>
		<!-- /.좌측 메뉴 -->
		<!-- Control Sidebar -->
		<aside class="control-sidebar control-sidebar-dark">
			<!-- Control sidebar content goes here -->
		</aside>
		<!-- /.control-sidebar -->
	</div>
	<!-- ./wrapper -->

	<!-- jQuery -->
	<script src="../../plugins/jquery/jquery.min.js"></script>
	<!-- Bootstrap 4 -->
	<script src="../../plugins/bootstrap/js/bootstrap.bundle.min.js"></script>
	<!-- DataTables  & Plugins -->
	<script src="../../plugins/datatables/jquery.dataTables.min.js"></script>
	<script
		src="../../plugins/datatables-bs4/js/dataTables.bootstrap4.min.js"></script>
	<script
		src="../../plugins/datatables-responsive/js/dataTables.responsive.min.js"></script>
	<script
		src="../../plugins/datatables-responsive/js/responsive.bootstrap4.min.js"></script>
	<script
		src="../../plugins/datatables-buttons/js/dataTables.buttons.min.js"></script>
	<script
		src="../../plugins/datatables-buttons/js/buttons.bootstrap4.min.js"></script>
	<script src="../../plugins/jszip/jszip.min.js"></script>
	<script src="../../plugins/pdfmake/pdfmake.min.js"></script>
	<script src="../../plugins/pdfmake/vfs_fonts.js"></script>
	<script src="../../plugins/datatables-buttons/js/buttons.html5.min.js"></script>
	<script src="../../plugins/datatables-buttons/js/buttons.print.min.js"></script>
	<script src="../../plugins/datatables-buttons/js/buttons.colVis.min.js"></script>
	<!-- AdminLTE App -->
	<script src="../../dist/js/adminlte.min.js"></script>
	<!-- AdminLTE for demo purposes -->
	<script src="../../dist/js/demo.js"></script>
	<!-- InputMask -->
	<script src="../../plugins/moment/moment.min.js"></script>
	<script src="../../plugins/inputmask/jquery.inputmask.min.js"></script>
	<!-- date-range-picker -->
	<script src="../../plugins/daterangepicker/daterangepicker.js"></script>
	<!-- select2 -->
	<script
		src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>

	<!-- Page specific script -->
	<script th:inline="javascript">
		$(function() {
			// 페이지 첫 로딩 시 테이블 출력
			$("#example1")
					.DataTable(
							{
								aaSorting : [], // 초기 정렬 비활성화
								// 버튼 위치 조절
								dom : "<'row'<'col-sm-12 col-md-6'B><'col-sm-12 col-md-6'f>>"
										+ "<'row'<'col-sm-12'tr>>"
										+ "<'row'<'col-sm-12 col-md-5'i><'col-sm-12 col-md-7'p>>",
								ajax : {
									url : "/getMemberList",
									type : "POST",
									data : {},
									"dataSrc" : function(res) {
										return res;
									}
								},
								columns : [
								// DB컬럼명 일치하게 작성
								{
									data : "JOIN_DATE",
									"defaultContent" : ""
								}, {
									data : "ID",
									"defaultContent" : ""
								}, {
									data : "NAME",
									"defaultContent" : ""
								}, {
									data : "PHONE",
									"defaultContent" : ""
								}, {
									data : "DEPARTMENT",
									"defaultContent" : ""
								}, {
									data : "GRADE",
									"defaultContent" : ""
								}, {
									data : "EMAIL",
									"defaultContent" : ""
								} ],
								responsive : true,
								lengthChange : false,
								autoWidth : false,
								buttons : [ "copy", "csv", "excel", "pdf",
										"print", "colvis" ]
							}).buttons().container().appendTo(
							'#example1_wrapper .col-md-6:eq(0)'); //export 버튼 위치

			// date_picker 설정 및 페이지 최초 로딩시 조회 기간 설정 (DB데이터의 최대에서 최소일자)
			let date = /*[[${commuteMinMaxDate}]]*/
			$('#stDate')
					.daterangepicker(
							{
								locale : {
									"separator" : " ~ ",
									"format" : 'YYYY-MM-DD',
									"applyLabel" : "조회",
									"cancelLabel" : "취소",
									"daysOfWeek" : [ "일", "월", "화", "수", "목",
											"금", "토" ],
									"monthNames" : [ "1월", "2월", "3월", "4월",
											"5월", "6월", "7월", "8월", "9월",
											"10월", "11월", "12월" ],
									"firstDay" : 1
								},
								startDate : date.COMMUTE_MIN_DATE, // 초기 설정 값
								endDate : date.COMMUTE_MAX_DATE, // 초기 설정 값
								minDate : date.COMMUTE_MIN_DATE, // 선택 제한 값
								maxDate : date.COMMUTE_MAX_DATE
							// 선택 제한 값
							});
			$("#stDate").attr("readonly", true);

			$("#stDate")
					.on(
							"change",
							function() {
								// 기존 테이블 삭제
								$("#example1").DataTable().destroy();

								let date = $("#reservation").val().split(' ~ ');

								$("#example1")
										.DataTable(
												{
													aaSorting : [], // 초기 정렬 비활성화
													// 버튼 위치 조절
													dom : "<'row'<'col-sm-12 col-md-6'B><'col-sm-12 col-md-6'f>>"
															+ "<'row'<'col-sm-12'tr>>"
															+ "<'row'<'col-sm-12 col-md-5'i><'col-sm-12 col-md-7'p>>",
													ajax : {
														url : "/getMemberList",
														type : "POST",
														data : {
															startDate : date[0],
															endDate : date[1]
														},
														"dataSrc" : function(
																res) {
															return res;
														}
													},
													columns : [
													// DB컬럼명 일치하게 작성
													{
														data : "JOIN_DATE",
														"defaultContent" : ""
													}, {
														data : "ID",
														"defaultContent" : ""
													}, {
														data : "NAME",
														"defaultContent" : ""
													}, {
														data : "PHONE",
														"defaultContent" : ""
													}, {
														data : "DEPARTMENT",
														"defaultContent" : ""
													}, {
														data : "GRADE",
														"defaultContent" : ""
													}, {
														data : "EMAIL",
														"defaultContent" : ""
													} ],
													responsive : true,
													lengthChange : false,
													autoWidth : false,
													buttons : [ "copy", "csv",
															"excel", "pdf",
															"print", "colvis" ]
												})
										.buttons()
										.container()
										.appendTo(
												'#example1_wrapper .col-md-6:eq(0)');
							});
		});
	</script>
	<script>
		$(document).ready(function() {
			$('.appointGubun').select2();
		});
	</script>
	<script>
		//Date range picker

		$(function() {
			$('#dateRange').daterangepicker({
				locale: {
					"separator": " ~ ",
					"format": 'YYYY-MM-DD',
					"applyLabel": "조회",
			     	"cancelLabel": "취소",
			     	"daysOfWeek": ["일", "월", "화", "수", "목", "금", "토"], 
			     	"monthNames": ["1월", "2월", "3월", "4월", "5월", "6월", "7월", "8월", "9월", "10월", "11월", "12월"],
			      	"firstDay": 1
			    },
			});
		});
	</script>
</body>
</html>
