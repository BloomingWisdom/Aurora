<aside class="main-sidebar sidebar-dark-primary elevation-4" th:fragment="sidebar">
	<!-- Brand Logo -->
	<a href="../../index3.html" class="brand-link">
		<img src="../../dist/img/AdminLTELogo.png" alt="AdminLTE Logo" class="brand-image img-circle elevation-3" style="opacity: .8">
		<span class="brand-text font-weight-light">AdminLTE 3</span>
	</a>

	<!-- Sidebar -->
	<div class="sidebar">
		<!-- Sidebar user (optional) -->
		<div class="user-panel mt-3 pb-3 mb-3 d-flex">
			<div class="image">
				<img src="../../dist/img/user2-160x160.jpg" class="img-circle elevation-2" alt="User Image">
			</div>
			<div class="info">
				<a th:href="@{/mypage}"  class="d-block">Alexander Pierce</a>
			</div>
		</div>

		<!-- SidebarSearch Form -->
		<div class="form-inline">
			<div class="input-group" data-widget="sidebar-search">
				<input class="form-control form-control-sidebar" type="search" placeholder="Search" aria-label="Search">
				<div class="input-group-append">
					<button class="btn btn-sidebar">
						<i class="fas fa-search fa-fw"></i>
					</button>
				</div>
			</div>
		</div>
		<!-- 메인 정보 -->
		<nav class="mt-2">
			<ul class="nav nav-pills nav-sidebar flex-column" data-widget="treeview" role="menu" data-accordion="false">
				
				<!-- 공지사항 --> 
								<li class="nav-item">
								
									<a href="#" class="nav-link">
										<p>
											커뮤니티
											<i class="fas fa-angle-left right"></i>
										</p>
									</a>
									<ul class="nav nav-treeview">
										<li class="nav-header">ㅡ  공지사항</li>
										<li class="nav-item">
											<a th:href="@{/notice/noticeList}" class="nav-link">
												<p>공지</p>
											</a>
										</li>
										<li class="nav-item">
											<a th:href="@{/department}" class="nav-link">
												<p>부서관리 어디 넣지</p>
											</a>
										</li>
									</ul>
								</li>
								<!-- /.공지사항 -->
				
				<!-- 시스템관리 --> 
				<li class="nav-item">
				
					<a href="#" class="nav-link">
						<p>
							시스템관리
							<i class="fas fa-angle-left right"></i>
						</p>
					</a>
					<ul class="nav nav-treeview">
						<li class="nav-header">ㅡ  시스템관리</li>
						<li class="nav-item">
							<a th:href="@{/admin/commonCode}" class="nav-link">
								<p>공통코드</p>
							</a>
						</li>
						<li class="nav-item">
							<a th:href="@{/admin/menu}" class="nav-link">
								<p>메뉴</p>
							</a>
						</li>
					</ul>
				</li>
				<!-- /.시스템관리 -->
				
				<!-- 인사 정보 --> 
				<li class="nav-item">
					<a href="#" class="nav-link">
						<p>
							인사관리
							<i class="fas fa-angle-left right"></i>
						</p>
					</a>
					<ul class="nav nav-treeview">
						<li class="nav-header text-right">ㅡ  일반 사용자 화면</li>
						<li class="nav-item">
							<a th:href="@{/mypage}"  class="nav-link">
								<p>마이페이지</p>
							</a>
						</li>
						<li class="nav-item">
							<a th:href="@{/appoint/appointmentsNotice}" class="nav-link">
								<p>인사발령</p>
							</a>
						</li>
						<li class="nav-item">
							<a th:href="@{/appoint/organization}" class="nav-link">
								<p>조직현황</p>
							</a>
						</li>
						<!--<li class="nav-item">
							<a href="../kanban.html" class="nav-link">
								
								<p>인사일, 경력 사항 조회</p>
							</a>
						</li>-->
						
						<li class="nav-header text-right">ㅡ  관리자 화면</li>
						<li class="nav-item">
							<a th:href="@{/appoint/memberList}"class="nav-link">
								<p>인사목록</p>
							</a>
						</li>
						<li class="nav-item">
							<a th:href="@{/appoint/personnelAppointments}"class="nav-link">
								<p>인사발령관리</p>
							</a>
						</li>
						<!--<li class="nav-item">
							<a href="../mailbox/mailbox.html" class="nav-link">
								<p>자격증 및 스킬 정보 죄회</p>
							</a>
						</li>
						<li class="nav-item">
							<a href="../mailbox/compose.html" class="nav-link">
								<p>교육 일정 확인 및 신청</p>
							</a>
						</li>
						
						<li class="nav-header">ㅡ  인사 문서 요청</li>
						<li class="nav-item">
							<a href="../mailbox/read-mail.html" class="nav-link">
								<p>재직/경력 증명서 요청</p>
							</a>
						</li>
						<li class="nav-item">
							<a href="../mailbox/read-mail.html" class="nav-link">
								<p>인사 관련 공지 확인</p>
							</a>
						</li>-->
					</ul>
				</li>
				<!-- /.인사 정보 -->

				
				<!-- 근태 정보 --> 
				<li class="nav-item">
					<a href="#" class="nav-link">
						<p>
							근태
							<i class="fas fa-angle-left right"></i>
						</p>
					</a>
					<ul class="nav nav-treeview">
						<li class="nav-header">ㅡ  출퇴근 기록</li>
						<li class="nav-item">
							<a href="../commute/cmt" class="nav-link">
								<p>출퇴근</p>
							</a>
						</li>
						<li class="nav-item">
							<a th:href="@{/myCommuteHistory}" class="nav-link">
								<p>내 출퇴근 기록 확인</p>
							</a>
						</li>
						<li class="nav-item">
							<a th:href="@{/myAttendanceTime}" class="nav-link">
								<p>내 출퇴근 기준 시간 확인</p>
							</a>
						</li>
						<li class="nav-item">
							<a th:href="@{/myAttendanceHistory}" class="nav-link">
								<p>내 지각/조퇴/결근 내역 확인</p>
							</a>
						</li>
						<li class="nav-header">ㅡ  관리자 출퇴근 기록</li>
						<li class="nav-item">
							<a th:href="@{/admin/commuteHistory}" class="nav-link">
								<p>출퇴근 기록 관리</p>
							</a>
						</li>
						<li class="nav-item">
							<a th:href="@{/admin/attendanceTime}" class="nav-link">
								<p>출퇴근 기준 시간 관리</p>
							</a>
						</li>
						<li class="nav-item">
							<a th:href="@{/admin/attendanceHistory}" class="nav-link">
								<p>지각/조퇴/결근 내역 확인</p>
							</a>
						</li>
						<li class="nav-header">ㅡ  근무 일정 관리</li>
						<li class="nav-item">
							<a th:href="@{/admin/setHoliday}" class="nav-link">
								<p>휴무일 관리</p>
							</a>
						</li>
						</li>
					</ul>
				</li>
				<!-- /.근태 정보 -->
				
				<!-- 급여 정보 --> 
				<li class="nav-item">
				
					<a href="#" class="nav-link">
						<p>
							급여
							<i class="fas fa-angle-left right"></i>
						</p>
					</a>
					<ul class="nav nav-treeview">
						<li class="nav-header">ㅡ  급여 조회</li>
						<li class="nav-item">
							<a th:href="@{/salary/salaryListEmployee}" class="nav-link">
								<p>사원별 급여 조회</p>
							</a>
						</li>
						<li class="nav-item">
							<a href="#" class="nav-link">
								<p>근무 일수 및 수당 조회(미구현)</p>
							</a>
						</li>
						
						<li class="nav-header">ㅡ  급여 관련 요청</li>
						<li class="nav-item">
							<a href="#" class="nav-link">
								<p>지급 오류 신고(미구현)</p>
							</a>
						</li>
						<li class="nav-item">
							<a href="#" class="nav-link">
								<p>급여 정산 요청(미구현)</p>
							</a>
						</li>
						
						<li class="nav-header">ㅡ  급여 문의</li>
						<li class="nav-item">
							<a href="#" class="nav-link">
								<p>자주 묻는 질문(FAQ)(미구현)</p>
							</a>
						</li>
						<li class="nav-item">
							<a th:href="@{/salary/salarySendTest}" class="nav-link">
								<p>급여 명세서 발급</p>
							</a>
						</li>
						<li class="nav-header">ㅡ  관리자 화면(급여)</li>
						<li class="nav-item">
							<a th:href="@{/salary/salaryInput}" class="nav-link">
								<p>급여 입력</p>
							</a>
						</li>
						<li class="nav-item">
							<a th:href="@{/salary/salaryInputList}" class="nav-link">
								<p>급여 등록 현황</p>
							</a>
						</li>
						<li class="nav-item">
							<a th:href="@{/salary/salaryTransferList}" class="nav-link">
								<p>급여 이체 현황</p>
							</a>
						</li>
						<li class="nav-item">
							<a th:href="@{/salary/salaryStatistics}" class="nav-link">
								<p>급여 통계(미구현)</p>
							</a>
						</li>
					</ul>
				</li>
				<!-- /.급여 정보 -->
				
				<!-- 전자결재 --> 
				<li class="nav-item">
				
					<a href="#" class="nav-link">
						<p>
							전자결재
							<i class="fas fa-angle-left right"></i>
						</p>
					</a>
					<ul class="nav nav-treeview">
						<li class="nav-header">ㅡ  전자결재</li>
						<li class="nav-item">
							<a th:href="@{/approval/createApprovalRequest}" class="nav-link">
								<p>결재 신청</p>
							</a>
						</li>
						<li class="nav-item">
							<a th:href="@{/approval/myApprovalRequestStandby}" class="nav-link">
								<p>내 결재 대기 문서</p>
							</a>
						</li>
						<li class="nav-item">
							<a th:href="@{/approval/myApprovalRequestCompletion}" class="nav-link">
								<p>내 결재 완료 문서</p>
							</a>
						</li>
						<li class="nav-header">ㅡ  관리자 전자결재</li>
						<li class="nav-item">
							<a th:href="@{/admin/approvalRequestStandby}" class="nav-link">
								<p>결재 대기 문서</p>
							</a>
						</li>
						<li class="nav-item">
							<a th:href="@{/admin/approvalRequestCompletion}" class="nav-link">
								<p>결재 완료 문서</p>
							</a>
						</li>
					</ul>
				</li>
				<!-- /.전자결재 -->
				
			</ul>
		</nav>
		<!-- /.메인 정보 -->
	</div>
	<!-- /.sidebar -->
</aside>

<script th:fragment="sidebar" th:inline="javascript">
	let menuData = /*[[${menus}]]*/
	
	function generateMenu(data) {
	    const menuMap = new Map();

	    data.forEach(item => {
	        menuMap.set(item.MENU_ID, { ...item, children: [] });
	    });
		
	    // 부모-자식 관계 설정
	    data.forEach(item => {
	        if (item.PARENT_ID) {
	            const parent = menuMap.get(item.PARENT_ID);
	            if (parent) {
	                parent.children.push(menuMap.get(item.MENU_ID));
	            }
	        }
	    });

	    // 최상위 메뉴만 반환
	    const rootItems = [...menuMap.values()].filter(item => !item.PARENT_ID);
	    
	    function createMenuHTML(items) {
	        if (!items.length) {
				return '';
			}
			
	        let html = '<ul class="nav nav-treeview">';
	        items.forEach(item => {
	            html += `
	                <li class="nav-item">
	                    <a href="${item.URL || '#'}" class="nav-link">
	                        <p>${item.NAME}${item.URL ? '' : '<i class="fas fa-angle-left right"></i>'}</p>
	                    </a>
	                    ${createMenuHTML(item.children)}
	                </li>
	            `;
	        });
	        html += '</ul>';
			
	        return html;
	    }

	    let html = '<ul class="nav nav-pills nav-sidebar flex-column" data-widget="treeview" role="menu" data-accordion="false">';
	    rootItems.forEach(item => {
	        html += `
	            <li class="nav-item">
	                <a href="${item.URL || '#'}" class="nav-link">
	                    <p>${item.NAME}${item.URL ? '' : '<i class="fas fa-angle-left right"></i>'}</p>
	                </a>
	                ${createMenuHTML(item.children)}
	            </li>
	        `;
	    });
	    html += '</ul>';
	    return html;
	}

	document.addEventListener("DOMContentLoaded", () => {
	    const sidebar = document.querySelector(".mt-2");
	    if (sidebar) {
//	        sidebar.innerHTML = generateMenu(menuData);
	    }
	});
</script>
